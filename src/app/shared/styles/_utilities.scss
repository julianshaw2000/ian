// Utility mixins and functions for using the city History color scheme

// Mixin to apply city color backgrounds
@mixin city-color-bg($color) {
  @if $color == 'dusty-mauve' {
    background-color: var(--city-dusty-mauve);
  } @else if $color == 'muted-teal' {
    background-color: var(--city-muted-teal);
  } @else if $color == 'beige' {
    background-color: var(--city-beige);
  } @else if $color == 'powder-blush' {
    background-color: var(--city-powder-blush);
  } @else if $color == 'light-coral' {
    background-color: var(--city-light-coral);
  }
}

// Mixin to apply city color text
@mixin city-color-text($color) {
  @if $color == 'dusty-mauve' {
    color: var(--city-dusty-mauve);
  } @else if $color == 'muted-teal' {
    color: var(--city-muted-teal);
  } @else if $color == 'beige' {
    color: var(--city-beige);
  } @else if $color == 'powder-blush' {
    color: var(--city-powder-blush);
  } @else if $color == 'light-coral' {
    color: var(--city-light-coral);
  }
}

// Mixin to apply semantic text colors
@mixin semantic-text-color($type: 'primary') {
  @if $type == 'primary' {
    color: var(--text-primary);
  } @else if $type == 'secondary' {
    color: var(--text-secondary);
  } @else if $type == 'muted' {
    color: var(--text-muted);
  } @else if $type == 'interactive' {
    color: var(--text-interactive);
  } @else if $type == 'brand' {
    color: var(--text-brand);
  } @else if $type == 'success' {
    color: var(--text-success);
  } @else if $type == 'warning' {
    color: var(--text-warning);
  } @else if $type == 'error' {
    color: var(--text-error);
  } @else if $type == 'accent' {
    color: var(--text-accent);
  } @else if $type == 'on-primary' {
    color: var(--text-on-primary);
  } @else if $type == 'on-secondary' {
    color: var(--text-on-secondary);
  } @else if $type == 'inverse' {
    color: var(--text-inverse);
  }
}

// Mixin to apply city gradients
@mixin city-gradient-bg($type: 'primary') {
  @if $type == 'primary' {
    background: var(--city-gradient-primary);
  } @else if $type == 'secondary' {
    background: var(--city-gradient-secondary);
  } @else if $type == 'accent' {
    background: var(--city-gradient-accent);
  }
}

// Background color utility classes
.city-bg {
  &-dusty-mauve {
    @include city-color-bg('dusty-mauve');
  }

  &-muted-teal {
    @include city-color-bg('muted-teal');
  }

  &-beige {
    @include city-color-bg('beige');
  }

  &-powder-blush {
    @include city-color-bg('powder-blush');
  }

  &-light-coral {
    @include city-color-bg('light-coral');
  }
}

// Custom color text utility classes
.city-text {
  &-dusty-mauve {
    @include city-color-text('dusty-mauve');
  }

  &-muted-teal {
    @include city-color-text('muted-teal');
  }

  &-beige {
    @include city-color-text('beige');
  }

  &-powder-blush {
    @include city-color-text('powder-blush');
  }

  &-light-coral {
    @include city-color-text('light-coral');
  }
}

// Semantic text color utility classes
.text {
  // Primary text hierarchy
  &-primary {
    color: var(--text-primary);
    font-weight: 500;
  }

  &-secondary {
    color: var(--text-secondary);
    font-weight: 400;
  }

  &-muted {
    color: var(--text-muted);
    font-weight: 400;
  }

  // Interactive and action colors
  &-interactive {
    color: var(--text-interactive);
    cursor: pointer;
    transition: opacity 0.2s ease;

    &:hover {
      opacity: 0.8;
    }
  }

  &-brand {
    color: var(--text-brand);
    font-weight: 600;
  }

  // Status colors
  &-success {
    color: var(--text-success);

    &-emphasis {
      color: var(--text-success);
      font-weight: 600;
    }
  }

  &-warning {
    color: var(--text-warning);

    &-emphasis {
      color: var(--text-warning);
      font-weight: 600;
    }
  }

  &-error {
    color: var(--text-error);

    &-emphasis {
      color: var(--text-error);
      font-weight: 600;
    }
  }

  &-accent {
    color: var(--text-accent);

    &-emphasis {
      color: var(--text-accent);
      font-weight: 600;
    }
  }

  // Surface contrast colors
  &-on-primary {
    color: var(--text-on-primary);
  }

  &-on-secondary {
    color: var(--text-on-secondary);
  }

  &-inverse {
    color: var(--text-inverse);
  }

  // Size variations
  &-small {
    font-size: 0.875rem;
    line-height: 1.25rem;
  }

  &-base {
    font-size: 1rem;
    line-height: 1.5rem;
  }

  &-large {
    font-size: 1.125rem;
    line-height: 1.75rem;
  }

  &-xl {
    font-size: 1.25rem;
    line-height: 1.75rem;
  }

  // Weight variations
  &-light {
    font-weight: 300;
  }

  &-normal {
    font-weight: 400;
  }

  &-medium {
    font-weight: 500;
  }

  &-semibold {
    font-weight: 600;
  }

  &-bold {
    font-weight: 700;
  }
}

// Gradient utility classes
.city-gradient {
  &-primary {
    @include city-gradient-bg('primary');
  }

  &-secondary {
    @include city-gradient-bg('secondary');
  }

  &-accent {
    @include city-gradient-bg('accent');
  }
}

// Theme-aware shadow utilities
.city-elevation {
  &-1 {
    box-shadow: 0 1px 3px color-mix(in srgb, var(--city-dusty-mauve) 12%, transparent),
      0 1px 2px color-mix(in srgb, var(--city-dusty-mauve) 24%, transparent);
  }

  &-2 {
    box-shadow: 0 3px 6px color-mix(in srgb, var(--city-dusty-mauve) 15%, transparent),
      0 2px 4px color-mix(in srgb, var(--city-dusty-mauve) 12%, transparent);
  }

  &-3 {
    box-shadow: 0 6px 12px color-mix(in srgb, var(--city-dusty-mauve) 15%, transparent),
      0 4px 6px color-mix(in srgb, var(--city-dusty-mauve) 10%, transparent);
  }
}

// Component-specific text utilities
.vh-text {
  &-heading {
    @include semantic-text-color('primary');
    font-weight: 600;
    line-height: 1.2;
  }

  &-subheading {
    @include semantic-text-color('secondary');
    font-weight: 500;
    line-height: 1.4;
  }

  &-body {
    @include semantic-text-color('primary');
    font-weight: 400;
    line-height: 1.6;
  }

  &-caption {
    @include semantic-text-color('muted');
    font-size: 0.875rem;
    line-height: 1.25rem;
  }

  &-link {
    @include semantic-text-color('interactive');
    text-decoration: underline;
    text-decoration-color: transparent;
    transition: text-decoration-color 0.2s ease;

    &:hover {
      text-decoration-color: currentColor;
    }
  }
}

// Button utility mixin
@mixin semantic-button($variant: 'primary', $size: 'medium') {
  // Base button styles
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid transparent;
  border-radius: 0.5rem;
  font-weight: 600;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.2s ease;
  outline: none;

  // Size variations
  @if $size == 'small' {
    padding: 0.375rem 0.75rem;
    font-size: 0.875rem;
    line-height: 1.25rem;
  } @else if $size == 'medium' {
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    line-height: 1.5rem;
  } @else if $size == 'large' {
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    line-height: 1.5rem;
  }

  // Variant styles
  @if $variant == 'primary' {
    background-color: var(--btn-primary-bg);
    color: var(--btn-primary-text);
    &:hover:not(:disabled) {
      background-color: var(--btn-primary-hover-bg);
    }
  } @else if $variant == 'secondary' {
    background-color: var(--btn-secondary-bg);
    color: var(--btn-secondary-text);
    &:hover:not(:disabled) {
      background-color: var(--btn-secondary-hover-bg);
    }
  } @else if $variant == 'brand' {
    background-color: var(--btn-brand-bg);
    color: var(--btn-brand-text);
    &:hover:not(:disabled) {
      background-color: var(--btn-brand-hover-bg);
    }
  } @else if $variant == 'success' {
    background-color: var(--btn-success-bg);
    color: var(--btn-success-text);
    &:hover:not(:disabled) {
      background-color: var(--btn-success-hover-bg);
    }
  } @else if $variant == 'warning' {
    background-color: var(--btn-warning-bg);
    color: var(--btn-warning-text);
    &:hover:not(:disabled) {
      background-color: var(--btn-warning-hover-bg);
    }
  } @else if $variant == 'error' {
    background-color: var(--btn-error-bg);
    color: var(--btn-error-text);
    &:hover:not(:disabled) {
      background-color: var(--btn-error-hover-bg);
    }
  } @else if $variant == 'outline' {
    background-color: transparent;
    border-color: var(--btn-outline-border);
    color: var(--btn-outline-text);
    &:hover:not(:disabled) {
      background-color: var(--btn-outline-hover-bg);
    }
  } @else if $variant == 'ghost' {
    background-color: transparent;
    color: var(--btn-ghost-text);
    &:hover:not(:disabled) {
      background-color: var(--btn-ghost-hover-bg);
    }
  }

  // Disabled state
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  // Focus states for accessibility
  &:focus-visible {
    box-shadow: 0 0 0 2px var(--mat-sys-outline);
  }
}

// Button utility classes
.btn {
  // Primary button variants
  &-primary {
    @include semantic-button('primary', 'medium');
    &-sm {
      @include semantic-button('primary', 'small');
    }
    &-lg {
      @include semantic-button('primary', 'large');
    }
  }

  &-secondary {
    @include semantic-button('secondary', 'medium');
    &-sm {
      @include semantic-button('secondary', 'small');
    }
    &-lg {
      @include semantic-button('secondary', 'large');
    }
  }

  &-brand {
    @include semantic-button('brand', 'medium');
    &-sm {
      @include semantic-button('brand', 'small');
    }
    &-lg {
      @include semantic-button('brand', 'large');
    }
  }

  &-success {
    @include semantic-button('success', 'medium');
    &-sm {
      @include semantic-button('success', 'small');
    }
    &-lg {
      @include semantic-button('success', 'large');
    }
  }

  &-warning {
    @include semantic-button('warning', 'medium');
    &-sm {
      @include semantic-button('warning', 'small');
    }
    &-lg {
      @include semantic-button('warning', 'large');
    }
  }

  &-error {
    @include semantic-button('error', 'medium');
    &-sm {
      @include semantic-button('error', 'small');
    }
    &-lg {
      @include semantic-button('error', 'large');
    }
  }

  &-outline {
    @include semantic-button('outline', 'medium');
    &-sm {
      @include semantic-button('outline', 'small');
    }
    &-lg {
      @include semantic-button('outline', 'large');
    }
  }

  &-ghost {
    @include semantic-button('ghost', 'medium');
    &-sm {
      @include semantic-button('ghost', 'small');
    }
    &-lg {
      @include semantic-button('ghost', 'large');
    }
  }

  // Special style variants
  &-rounded {
    border-radius: 9999px;
  }

  &-square {
    border-radius: 0;
  }

  &-full {
    width: 100%;
  }

  &-icon-only {
    padding: 0.5rem;
    aspect-ratio: 1;
  }
}

// Component-specific button classes for existing patterns
.vh-btn {
  // Tour and navigation buttons
  &-next {
    @include semantic-button('brand', 'large');
    border-radius: 999px;
    padding-block: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.02em;
    width: 100%;
  }

  // Filter chips (buttons)
  &-filter {
    @include semantic-button('outline', 'small');
    border-radius: 999px;
    font-weight: 500;
    transition: all 150ms ease-out;

    &--active {
      @include semantic-button('brand', 'small');
      border-radius: 999px;
      font-weight: 600;
    }
  }

  // Card action buttons
  &-card-action {
    @include semantic-button('brand', 'medium');
    border-radius: 1rem;
    font-weight: 600;
    border: none;
  }

  // Admin buttons
  &-admin-save {
    @include semantic-button('success', 'medium');
  }

  &-admin-cancel {
    @include semantic-button('ghost', 'medium');
  }

  &-admin-delete {
    @include semantic-button('error', 'medium');
  }
}
